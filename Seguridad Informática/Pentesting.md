Las **pruebas de penetración**, también llamadas **pentesting**, son una simulación de ciberataque lanzada en su sistema informático. La simulación ayuda a descubrir puntos de explotación y probar la seguridad de las brechas de IT.

Los pentesters son contratados por las organizaciones para comprometer la [[Seguridad|seguridad]] a fin de demostrar [[Vulnerabilidad|vulnerabilidades]].

>La integridad de la red es la preocupación número uno para las empresas que consideran realizar pentests.

Los equipos responsables de pruebas de penetración tendrán múltiples medidas de seguridad para limitar cualquier impacto en la red. Antes de una prueba, la empresa trabaja con los evaluadores para crear dos listas: una lista de actividades excluidas y una lista de dispositivos excluidos. Las actividades excluidas pueden incluir tácticas como ataques de denegación de servicio ([[DoS]]).

Los programas de bug bounty también tienen su contrato y sus limitaciones aunque no sea limitado a una organización específica que realice la prueba.

>El producto final del pentest es un documento.

### Metodologías/Frameworks
- Open Source Security Testing Methodology Manua OSSTMM
- Penetration Testing Execution Standard PTES 
- NIST 800-115 
- Information System Security Assessment Framework ISSAF 
- OWASP

### Tipos de pruebas de penetración
#### Infraestructura de red
Puede centrarse en la infraestructura interna, como evadir un sistema de prevención de intrusiones de próxima generación (NGIPS), o la prueba puede centrarse en la infraestructura externa de la red, como evitar [[Firewall|firewalls]] externos mal configurados. En una prueba externa, el atacante se centra en la protección perimetral, como omitir un firewall de próxima generación (NGFW). Los ataques de red pueden incluir eludir los sistemas de protección de endpoints, interceptar el tráfico de red, probar [[Router|enrutadores]], robar credenciales, explotar servicios de red, descubrir dispositivos heredados (pueden ser una vulnerabilidad ya que mientras más viejo un equipo menos medidas de seguridad suele tener) y dispositivos de terceros, y más.

Puede ocurrir que una organización tenga una buena seguridad externa y una muy mala interna (por ejemplo que tenga un rouge AP).

#### Aplicaciones web
Si bien las [[World Wide Web|aplicaciones WEB]] pueden tener cierta superposición con los servicios de red, una prueba de aplicación web es mucho más detallada, intensa y requiere mucho tiempo. La mayor parte de la superficie de ataque externo está compuesta por aplicaciones web. Algunas aplicaciones web son vulnerables en el lado del servidor y otras son vulnerables en el lado del cliente. De cualquier manera, las aplicaciones web aumentan la superficie de ataque para los departamentos de IT. Los problemas de las aplicaciones web pueden incluir inyección SQL, secuencias de comandos entre sitios (XSS), autenticación insegura y criptografía débil.

Es el tipo más común y a veces no se llama pentest. No se ataca la red sino la aplicación, puede que esté montada en AWS en una red de primera categoría pero que la aplicación sea vulnerable.

#### Inalámbricas
Se identifican y explotan configuraciones de red inalámbricas inseguras y autenticación débil. Los protocolos vulnerables y las configuraciones débiles pueden permitir a los usuarios obtener acceso a una red cableada desde fuera del edificio. Además, las empresas están utilizando más dispositivos móviles que nunca, pero luchan por protegerlos. Una prueba podría explotar a los empleados corporativos que usan sus dispositivos en redes de invitados inseguras y abiertas.

Es un caso especial de la prueba de infraestructura de red.

#### Seguridad física
Es una prueba que se centra en la seguridad física de su organización. Durante estas pruebas, un atacante intenta obtener acceso al edificio o encontrar documentos o credenciales descartados que se pueden usar para comprometer la seguridad. Una vez dentro del edificio, un atacante puede intentar recopilar información espiando u ocultando dispositivos maliciosos en las oficinas para dar acceso remoto a la red interna de la empresa. Si bien la IT generalmente se centra en la seguridad digital, las herramientas para la protección de la red pueden ser inútiles si la empresa permite el acceso al edificio o revela información a personas externas. Por ejemplo, un empleado puede dejar que alguien ingrese al edificio u ofrecer una contraseña de Wi-Fi sin verificar si la persona que solicita acceso es un empleado.

Casi escapa el contexto de la materia. Cualquier dispositivo accesible físicamente no es seguro. Cuando no hay seguridad física no hay seguridad.

### Pasos
![[SI_circulo_del_hacking.png]]

#### Reconocimiento
Los objetivo del reconocimiento o footprinting son:
- Armar el mapa de red y sus servicios.
	- Detectar host
	- Servicios abiertos y servicios ocultos
	- Aplicaciones que corren los servicios
- También buscar:
	- Detectar id/usuarios/mails de las aplicaciones
	- Detectar equipos intermedios (switch, routers, IDS)
	- Detectar camaras, NVR, DVR, etc. 
	- Detectar servicios anexos VoIP, Servicios de videoconferencias 
	- Detectar Archivos de configuración (.env, .conf, etc) 
	- Detectar Archivos de log.

Tipos:
- **Reconocimiento pasivo**
  Tratar de revelar toda información posible disponible en la web. Ejemplos
  - Anuncios de ofertas laborales del oponente. Por ejemplo si buscan un DBA en Oracle significa que su infraestructura tiene un Oracle o va a tener.
  - Consultas de direcciones en internet. Como [[whois]] donde nos dan direcciones IP asignados, empresa dueña del dominio, etc.
  - Búsqueda en redes sociales. Cuales son los skills de los distintos administradores y desarrolladores.
  - Consultar a google, bing y gogoduck sobre la empresa. (Se busca como [[Google dork|Google hack]])
- **Reconocimiento activo**
  Tratar de revelar toda información posible disponible en la web. Ejemplos:
  - Barridos de ping: Determinar los equipos públicos de la empresa. 
  - Verificar servicios: Rastrear servicios que actualmente tienen. 
  - Uso de [[Ingeniería Social|ingeniería social]]: Rastrear los usuarios menos preparados y con privilegios sobre el sistema. 
  - Hacer un mapeo de red.
  Herramientas: 
  - [[nmap]] → para detectar servicios funcionando.
  - dig/host/nslookup → para detectar los host mediante el DNS del objetivo.
  - Buscar en las cabeceras de email.
  - OpenVas → Sistema de rastreo de vulnerabilidades. 
  - Otros: p0f, traceroute, hping, yersinia (Incluye ataques para protocolos de autoconfiguración dentro la red: para IEEE 802.1Q, Hot Standby Router Protocol (HSRP), Cisco Discovery Protocol (CDP), etc.).
  - Maltego: es una herramienta que permite administrar y buscar relaciones en los datos recabados sobre una organización de forma sencilla.

#### Ingeniería social
![[Ingeniería Social]]