**ARP** se encuentra documentado en el **[[RFC]] 826**. Es un [[protocolo]] que se encuentra en la [[Capa de enlace de datos|capa de enlace de datos]]. Es el encargado de mapear [[Direcciones IP|direcciones IP]] a [[direcciones MAC]], se basa en difundir un mensaje consultando donde se encuentra dicha dirección IP. Es un tipo de [[Sistema de Nombres|sistema de nombres]].

Aunque en Internet cada máquina tiene una o más direcciones IP, en realidad éstas no son suficientes para enviar paquetes. Las NIC (Tarjetas de Interfaz de Red) de la capa de enlace de datos no entienden las direcciones de Internet. En el caso de Ethernet, cada NIC de las que se hayan fabricado viene equipada con una dirección Ethernet única de 48 bits. Los fabricantes de NIC Ethernet solicitan un bloque de direcciones Ethernet al IEEE para asegurar que no haya dos NIC con la misma dirección (y evitar conflictos en caso de que las dos NIC aparezcan alguna vez en la misma LAN). Las NIC envían y reciben tramas basadas en direcciones Ethernet de 48 bits. No saben nada sobre direcciones IP de 32 bits.

Entonces se requiere un mecanismo para mapear direcciones IP a direcciones MAC para poder direccionar dentro de una subred. Esta es la funcionalidad que cubre ARP, el protocolo consta de que el host que desea enviar un paquete IP a otro host en su misma red primero envía una difusión preguntando a todas las máquinas en su subred quién es la que tiene la IP destinataria. Esa única máquina con dicha IP responde y en esta respuesta se incluye la MAC perteneciente a la NIC de dicha máquina. Entonces ahora el host inicial puede enviar el paquete IP al host correcto.

![[RRCC_arp_ejemplo.png]]

Es posible hacer varias optimizaciones para que ARP trabaje con más eficiencia. Para empezar, una vez que una máquina ha ejecutado ARP, guarda el resultado en caché, en caso de que tenga que ponerse en contacto con la misma máquina en poco tiempo. La siguiente vez encontrará la asociación en su propio caché, con lo cual se elimina la necesidad de una segunda difusión. En muchos casos, el host 2 necesitará devolver una respuesta y se verá forzado también a ejecutar el ARP para determinar la dirección Ethernet del emisor. Podemos evitar esta difusión de ARP haciendo que el host 1 incluya su asociación IP a Ethernet en el paquete ARP. Cuando la difusión de ARP llega al host 2, se introduce el par (192.32.65.7, E1) en la caché ARP del host 2. De hecho, todas las máquinas en Ethernet pueden introducir esta asociación en su caché ARP.

Para permitir que las asociaciones cambien, por ejemplo, al configurar un host para que use una nueva dirección IP (pero que mantenga su vieja dirección Ethernet), las entradas en la caché ARP deben expirar después de unos cuantos minutos. Una manera inteligente de ayudar a mantener actualizada la información en la caché y optimizar el desempeño es hacer que cada máquina difunda su asociación cuando se configure. Por lo general, esta difusión se realiza en forma de un ARP que busca su propia dirección IP. No debe haber una respuesta, pero un efecto colateral de la difusión es crear o actualizar una entrada en la caché ARP de todos. A esto se le conoce como **ARP gratuito**.

También es posible enviar un paquete del host 1 al host 4 sin que el primero sepa que el segundo está en una red diferente. La solución es hacer que el enrutador responda a los ARP en la red CC para el host 4 y proporcione su dirección Ethernet, E3, como respuesta. No es posible hacer que el host 4 responda directamente, ya que no verá la solicitud ARP (puesto que los enrutadores no reenvían difusiones a nivel de Ethernet). A continuación, el enrutador recibirá las tramas enviadas a 192.32.63.8 y las reenviará a la red IE. A esta solución se le conoce como **ARP por proxy** y se utiliza en casos especiales en los que un host desea aparecer en una red, aun cuando en realidad reside en otra. Por ejemplo, una situación común es una computadora móvil que desea que algún otro nodo recoja los paquetes por ella cuando no se encuentre en su red local.